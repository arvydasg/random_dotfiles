# https://selenium-python.readthedocs.io/getting-started.html
# installed venv, chrome driver version 96.0.4664.45
# deprecation docs - https://stackoverflow.com/questions/69875125/find-element-by-commands-are-deprecated-in-selenium
# scroll docs - https://stackoverflow.com/questions/20986631/how-can-i-scroll-a-web-page-using-selenium-webdriver-in-python
# pip install selenium in virtual env
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time
from selenium.webdriver.common.by import By # deprecation warning removed

driver = webdriver.Chrome("/home/arvydas/Desktop/chromedriver")
driver.maximize_window()

username = "julijas" 
password = "fd93b757bVnZA63U"


def iv_login():
    browser = driver.get("https://klientams.iv.lt/?command=signin")
    print("Atsidariau puslapi")
    print("vesiu duomenis uz 3")
    time.sleep(10)
    
    driver.find_element(By.NAME, "nick").send_keys(username)
    time.sleep(1)
    driver.find_element(By.NAME, "password").send_keys(password)

    print("suvesk koda, seniuk")
    driver.find_element_by_css_selector("input[type=\"submit\" i]").click()
    
    print("Duomenys suvesti, prisijungiau")
    time.sleep(2)

def do_backup():
    
    print("Spausiu Julija.consulting domena uz 3")
    time.sleep(2)
    driver.find_element(By.XPATH,'/html/body/table[2]/tbody/tr/td/table/tbody/tr[5]/td/ul[1]/li[2]/a').click()
    print("spausiu ant directadmin uz 5")
    time.sleep(2)

    driver.find_element(By.LINK_TEXT, "DirectAdmin").click()
    time.sleep(2)
    print("paspaudziau ant direct admin")
    time.sleep(2)
    print("spausiu ant atsargines kopijos uz 5")

    # atidarysiu paskutini langa pries backupa
    driver.get("https://kragas.serveriai.lt:8443/CMD_SITE_BACKUP?domain=julija.consulting")

    # DO BACKUP
    print("darysiu backupa uz 5")
    time.sleep(5)
    driver.find_element_by_css_selector("input[type=\"submit\" i]").click()
    time.sleep(2)
    
    print("baigiau, Julija.Consulting backupas atliktas!")
            
iv_login()
do_backup()

# back 
driver.close()
