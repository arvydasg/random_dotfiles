# https://selenium-python.readthedocs.io/getting-started.html
# installed venv, chrome driver version 96.0.4664.45
# deprecation docs - https://stackoverflow.com/questions/69875125/find-element-by-commands-are-deprecated-in-selenium
# scroll docs - https://stackoverflow.com/questions/20986631/how-can-i-scroll-a-web-page-using-selenium-webdriver-in-python
# pip install selenium in virtual env
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time
from selenium.webdriver.common.by import By # deprecation warning removed

driver = webdriver.Chrome("/home/arvydas/Desktop/chromedriver")
driver.maximize_window()
username = "obelsdumas"
password = "CG8K4wc7avYKKKY5"


def iv_login():
    browser = driver.get("https://klientams.iv.lt/?command=signin")
    print("Atsidariau puslapi")
    print("vesiu duomenis uz 3")
    time.sleep(3)
    
    driver.find_element(By.NAME, "nick").send_keys(username)
    time.sleep(3)
    driver.find_element(By.NAME, "password").send_keys(password)
    time.sleep(10)
    print("suvesk koda, seniuk")
    driver.find_element_by_css_selector("input[type=\"submit\" i]").click()
    
    print("Duomenys suvesti, prisijungiau")
    time.sleep(3)

def do_backup():
    
    print("Spausiu SmutiFruti domena uz 3")
    time.sleep(3)
    driver.find_element(By.XPATH,'/html/body/table[2]/tbody/tr/td/table/tbody/tr[5]/td/ul[1]/li[2]/a').click()
    print("spausiu ant directadmin uz 5")
    time.sleep(5)

    # spausk ant directadmin
    # driver.get("https://rabarbaras.serveriai.lt:8443/CMD_SHOW_DOMAIN?domain=smutifruti.lt") # neveikia, praso prisijungti, o prisijungti neiseina

    driver.find_element(By.LINK_TEXT, "DirectAdmin").click()
    time.sleep(2)
    print("paspaudziau ant direct admin")
    time.sleep(5)
    print("spausiu ant atsargines kopijos uz 5")

    # tiesiog atsidarau nauja linka lol
    driver.get("https://danielius.serveriai.lt:8443/CMD_SITE_BACKUP?domain=obelsdumas.lt")

    # switch to newly opened tab and close it
    # browser.switch_to.window(windows[0])
    print("uz 5sec uzdarysiu sita langa")
    time.sleep(5)
    
    # driver.find_element(By.XPATH, '/html/body/center/table/tbody/tr[1]/td[2]/table/tbody/tr[3]/td/table/tbody/tr/td/table/tbody/tr[2]/td[2]/table/tbody/tr[16]/td[2]/a') #nespaudzia ant sito, unable to locate
    time.sleep(5)

    print("spausiu submit uz 5")
    time.sleep(5)
    driver.find_element_by_css_selector("input[type=\"submit\" i]").click()
    time.sleep(5)
    
    time.sleep(5)
    print("baigiau, Obelsdumas backupas atliktas!")
            
iv_login()
do_backup()

# back 
driver.close()
